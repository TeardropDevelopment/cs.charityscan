@page "/qr"
@using System.Net;
@inject IJSRuntime JS
@using ReactorBlazorQRCodeScanner
@using BlazorBarcodeScanner.ZXing.JS

<PageTitle>QR READER</PageTitle>

<BlazorBarcodeScanner.ZXing.JS.BarcodeReader Title="Scan Barcode from Camera"
                                             StartCameraAutomatically="true"
                                             ShowVideoDeviceList="true"
                                             VideoWidth="300"
                                             VideoHeight="200"
                                             OnBarcodeReceived="LocalReceivedBarcodeText" />

@code {
    private string LocalBarcodeText;

    private void LocalReceivedBarcodeText(BarcodeReceivedEventArgs args)
    {
        this.LocalBarcodeText = args.BarcodeText;
        Console.WriteLine("Decoded Barcode: " + LocalBarcodeText);
        StateHasChanged();
    }
}


@*<QRCodeScanner />

@code {

    private QRCodeScannerJsInterop? _qrCodeScannerJsInterop;
    private Action<string>? _onQrCodeScanAction;

    protected override async Task OnInitializedAsync()
    {
        _onQrCodeScanAction = (code) => OnQrCodeScan(code);

        _qrCodeScannerJsInterop = new QRCodeScannerJsInterop(JS);
        await _qrCodeScannerJsInterop.Init(_onQrCodeScanAction);
    }

    private static void OnQrCodeScan(string code)
    {
        Console.WriteLine($"OnQrCodeScan {code}");
    }
}*@
